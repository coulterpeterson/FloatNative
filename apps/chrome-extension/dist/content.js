(()=>{"use strict";var e=function(e,t,n,o){return new(n||(n=Promise))(function(i,l){function s(e){try{d(o.next(e))}catch(e){l(e)}}function a(e){try{d(o.throw(e))}catch(e){l(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}d((o=o.apply(e,t||[])).next())})};function t(){const t=document.createElement("div");return t.className="fp-playlist-button",t.title="Save to Playlist",t.innerHTML='<i class="material-icons" aria-hidden="true" style="font-size: 22px; cursor: pointer;">playlist_add</i>',t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.height="40px",t.style.borderRadius="50%",t.style.cursor="pointer",t.style.color="inherit",t.onmouseover=()=>{t.style.backgroundColor="rgba(255,255,255,0.1)"},t.onmouseout=()=>{t.style.backgroundColor="transparent"},t.onclick=n=>e(this,void 0,void 0,function*(){n.preventDefault(),n.stopPropagation();const l=document.querySelector(".fp-playlist-dropdown");if(l)l.remove();else{t.style.cursor="wait";try{const n=yield i({type:"GET_PLAYLISTS",includeWatchLater:!0});t.style.cursor="pointer",n.success?function(t,n){const l=document.createElement("div");l.className="fp-playlist-dropdown",Object.assign(l.style,{position:"absolute",display:"flex",flexDirection:"column",backgroundColor:"#282828",color:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",zIndex:"9999",width:"260px",maxHeight:"400px",fontSize:"14px",fontFamily:"Roboto, Arial, sans-serif",overflow:"hidden"});const s=t.getBoundingClientRect(),a=window.scrollX||window.pageXOffset,d=window.scrollY||window.pageYOffset;l.style.top=`${s.bottom+d+8}px`,l.style.left=`${s.left+a}px`;const r=e=>{l.contains(e.target)||e.target===t||c()},c=()=>{l.remove(),document.removeEventListener("click",r)};function p(){l.innerHTML="";const t=document.createElement("div");Object.assign(t.style,{padding:"16px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"}),t.innerHTML='<span style="font-size: 16px; font-weight: 500;">Save to...</span>';const s=document.createElement("div");s.innerHTML='<svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: white; cursor: pointer;"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',s.onclick=e=>{e.stopPropagation(),c()},t.appendChild(s),l.appendChild(t);const a=document.createElement("div");Object.assign(a.style,{overflowY:"auto",maxHeight:"200px",padding:"8px 0"});const d=o();d?0===n.length?a.innerHTML='<div style="padding: 16px; color: #aaa;">No playlists yet.</div>':n.forEach(t=>{const n=document.createElement("div");Object.assign(n.style,{display:"flex",alignItems:"center",padding:"8px 16px",cursor:"pointer",transition:"background-color 0.2s"}),n.onmouseover=()=>n.style.backgroundColor="rgba(255,255,255,0.1)",n.onmouseout=()=>n.style.backgroundColor="transparent";const o=t.video_ids&&t.video_ids.includes(d),l=o?'<svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: #3ea6ff; margin-right: 16px;"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 12.17l7.59-7.59L19 6l-9 11z"></path></svg>':'<svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: #aaa; margin-right: 16px;"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></svg>',s=document.createElement("div");s.style.flex="1",s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.style.whiteSpace="nowrap",s.textContent=t.name||"Untitled";const r="Watch Later"===t.name?'<svg viewBox="0 0 24 24" style="width: 16px; height: 16px; fill: #aaa; margin-left: 8px;"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3 3.1-3 1.71 0 3.1 1.29 3.1 3v2z"></path></svg>':"";if(n.innerHTML=`${l}`,n.appendChild(s),r){const e=document.createElement("div");e.innerHTML=r,n.appendChild(e)}n.onclick=n=>e(this,void 0,void 0,function*(){n.stopPropagation();const e=!o;e?(t.video_ids||(t.video_ids=[]),t.video_ids.push(d)):t.video_ids=t.video_ids.filter(e=>e!==d),p();const l=e?"ADD_TO_PLAYLIST":"REMOVE_FROM_PLAYLIST";try{const n=yield i({type:l,playlistId:t.id,videoId:d});n.success||(console.error("Playlist action failed",n),e?t.video_ids=t.video_ids.filter(e=>e!==d):t.video_ids.push(d),p(),alert("Failed to update playlist: "+n.error))}catch(e){console.error(e)}}),a.appendChild(n)}):a.innerHTML='<div style="padding: 16px; color: #aaa;">Could not identify video. Are you on a video page?</div>',l.appendChild(a);const r=document.createElement("div");Object.assign(r.style,{padding:"16px",borderTop:"1px solid rgba(255,255,255,0.1)",cursor:"pointer",display:"flex",alignItems:"center"}),r.innerHTML='\n        <svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: white; margin-right: 16px;"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>\n        <span style="font-weight: 500;">Create new playlist</span>\n      ',r.onmouseover=()=>r.style.backgroundColor="rgba(255,255,255,0.1)",r.onmouseout=()=>r.style.backgroundColor="transparent",r.onclick=t=>{t.stopPropagation(),function(){l.innerHTML="";const t=document.createElement("div");t.style.padding="16px",t.style.display="flex",t.style.flexDirection="column",t.style.gap="16px";const s=document.createElement("div");s.textContent="Create new playlist",s.style.fontSize="16px",s.style.fontWeight="500",s.style.marginBottom="8px";const a=document.createElement("input");Object.assign(a.style,{background:"transparent",border:"none",borderBottom:"1px solid #aaa",color:"white",outline:"none",padding:"8px 0",fontSize:"14px",width:"100%"}),a.placeholder="Playlist name...";const d=document.createElement("div");d.style.display="flex",d.style.justifyContent="flex-end",d.style.gap="8px",d.style.marginTop="16px";const r=document.createElement("button");r.textContent="Cancel",Object.assign(r.style,{background:"transparent",border:"none",color:"#aaa",cursor:"pointer",fontWeight:"500",padding:"8px 16px",textTransform:"uppercase"}),r.onclick=e=>{e.stopPropagation(),p()};const c=document.createElement("button");c.textContent="Create",Object.assign(c.style,{background:"transparent",border:"none",color:"#3ea6ff",cursor:"pointer",fontWeight:"500",padding:"8px 16px",textTransform:"uppercase"}),c.onclick=t=>e(this,void 0,void 0,function*(){t.stopPropagation();const e=a.value.trim();if(e){c.textContent="Creating...",c.disabled=!0;try{const t=yield i({type:"CREATE_PLAYLIST",name:e});if(t.success&&t.result){const e=t.result;e.video_ids||(e.video_ids=[]);const l=o();l&&e.id&&(yield i({type:"ADD_TO_PLAYLIST",playlistId:e.id,videoId:l})).success&&e.video_ids.push(l),n.push(e),p()}else alert("Error creating playlist: "+(t.error||"Unknown error")),c.textContent="Create",c.disabled=!1}catch(e){alert("Error: "+e.message),c.textContent="Create",c.disabled=!1}}}),t.appendChild(s),t.appendChild(a),d.appendChild(r),d.appendChild(c),t.appendChild(d),l.appendChild(t),a.focus()}()},l.appendChild(r)}setTimeout(()=>document.addEventListener("click",r),0),p(),document.body.appendChild(l)}(t,n.playlists):(alert("Error fetching playlists: "+n.error),n.error.includes("UserNotAuthenticated")&&alert("Please click the extension icon to login first."))}catch(e){t.style.cursor="pointer",console.error(e),alert("Communication error: "+e.message)}}}),t}function n(e){return e?e.path:""}function o(){const e=window.location.pathname.match(/\/post\/([a-zA-Z0-9_\-]+)/);if(e)return e[1];const t=new URLSearchParams(window.location.search);return t.get("video")?t.get("video"):null}function i(t){return e(this,void 0,void 0,function*(){try{return yield chrome.runtime.sendMessage(t)}catch(e){if(e.message&&e.message.includes("Extension context invalidated"))throw new Error("There was an error, please refresh and try again");throw e}})}let l=null,s=!1;function a(){d(),l=new MutationObserver(e=>{let t=!1;for(const n of e)if(n.addedNodes.length>0){t=!0;break}t&&d()}),l.observe(document.body,{childList:!0,subtree:!0})}function d(){if(s&&!document.querySelector(".fp-playlist-button")&&(s=!1),!s){const e=document.querySelector('div[class*="_buttonContainer_"]');if(e){const n=e.querySelector('div[class*="_downloadButtonWrapper_"]');if(!document.querySelector(".fp-playlist-button")){const o=t();n?e.insertBefore(o,e.firstChild):e.prepend(o),s=!0}}}document.querySelectorAll('ul[role="tablist"]').forEach(t=>{if(!t.querySelector(".fp-sidebar-playlists")){const o=t.querySelector('a[href="/browse"]');if(o){const t=function(){const t=document.createElement("a");t.className="lnav-item-base-color lnav-link-item fp-sidebar-playlists",t.draggable=!1,t.href="/playlists";const o=document.createElement("div");o.className="item-icon",o.innerHTML='\n    <svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium" focusable="false" aria-hidden="true" viewBox="0 0 24 24" style="fill: currentColor; width: 24px; height: 24px;">\n        <path d="M19 9H2v2h17V9zm0-4H2v2h17V5zM2 15h13v-2H2v2zm15-2v6l5-3-5-3z"></path>\n    </svg>\n    ';const l=document.createElement("div");return l.className="item-label",l.role="tab",l.innerHTML="<span>Playlists</span>",t.appendChild(o),t.appendChild(l),t.style.display="flex",t.style.alignItems="center",t.style.padding="10px 16px",t.style.textDecoration="none",t.style.color="inherit",t.style.cursor="pointer",t.onclick=t=>e(this,void 0,void 0,function*(){t.preventDefault(),function(){e(this,void 0,void 0,function*(){const t=document.createElement("div");t.className="fp-playlist-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0,0,0,0.9)",t.style.zIndex="10000",t.style.display="flex",t.style.flexDirection="column",t.style.padding="40px",t.style.color="white",t.style.overflowY="auto",t.style.fontFamily="Roboto, sans-serif";const o=document.createElement("div");o.style.display="flex",o.style.justifyContent="space-between",o.style.alignItems="center",o.style.marginBottom="30px",o.style.maxWidth="1200px",o.style.width="100%",o.style.alignSelf="center";const l=document.createElement("h2");l.textContent="Your Playlists",l.style.fontSize="24px",l.style.fontWeight="bold";const s=document.createElement("button");s.textContent="Close",s.style.padding="8px 24px",s.style.backgroundColor="#3e8ede",s.style.border="none",s.style.borderRadius="4px",s.style.color="white",s.style.cursor="pointer",s.style.fontWeight="bold",s.onclick=()=>t.remove(),o.appendChild(l);const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.gap="16px",a.appendChild(s),o.appendChild(a),t.appendChild(o);const d=document.createElement("div");d.style.maxWidth="1200px",d.style.width="100%",d.style.alignSelf="center",d.style.display="flex",d.style.flexDirection="column",t.appendChild(d);const r=document.createElement("div");d.appendChild(r),r.appendChild(function(){if(!document.getElementById("fp-skeleton-style")){const e=document.createElement("style");e.id="fp-skeleton-style",e.textContent="\n            @keyframes fp-shimmer {\n                0% { background-position: -200% 0; }\n                100% { background-position: 200% 0; }\n            }\n            .fp-skeleton {\n                background: linear-gradient(90deg, #2d2d2d 25%, #3d3d3d 50%, #2d2d2d 75%);\n                background-size: 200% 100%;\n                animation: fp-shimmer 1.5s infinite;\n                border-radius: 4px;\n            }\n        ",document.head.appendChild(e)}const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.gap="10px";for(let t=0;t<5;t++){const t=document.createElement("div");Object.assign(t.style,{padding:"16px",backgroundColor:"#2d2d2d",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"});const n=document.createElement("div");n.className="fp-skeleton",n.style.width="40%",n.style.height="24px";const o=document.createElement("div");o.className="fp-skeleton",o.style.width="15%",o.style.height="18px",t.appendChild(n),t.appendChild(o),e.appendChild(t)}return e}()),document.body.appendChild(t);try{const o=yield i({type:"GET_PLAYLISTS",includeWatchLater:!0});o.success?(r.textContent="",0===o.playlists.length?r.textContent="No playlists found.":o.playlists.forEach(o=>{const c=document.createElement("div");c.style.padding="16px",c.style.marginBottom="10px",c.style.backgroundColor="#2d2d2d",c.style.borderRadius="8px",c.style.cursor="pointer",c.style.display="flex",c.style.justifyContent="space-between",c.style.alignItems="center",c.style.transition="background-color 0.2s",c.onmouseover=()=>c.style.backgroundColor="#3d3d3d",c.onmouseout=()=>c.style.backgroundColor="#2d2d2d";const p=o.name||"Untitled",u=Array.isArray(o.video_ids)?o.video_ids.length:0,y=document.createElement("div");y.style.fontSize="18px",y.style.fontWeight="500",y.textContent=p;const m=document.createElement("div");m.style.display="flex",m.style.alignItems="center",m.style.gap="15px";const h=document.createElement("div");h.style.color="#aaa",h.textContent=`${u} videos`;const g=document.createElement("div");Object.assign(g.style,{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#555",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background-color 0.2s"}),g.title="Delete Playlist",g.innerHTML='<svg viewBox="0 0 24 24" style="width: 18px; height: 18px; fill: white;"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',g.onmouseover=()=>g.style.backgroundColor="#ff0000",g.onmouseout=()=>g.style.backgroundColor="#555",g.onclick=t=>e(this,void 0,void 0,function*(){if(t.stopPropagation(),confirm(`Are you sure you want to delete playlist "${p}"?`)){g.style.cursor="wait";try{const e=yield i({type:"DELETE_PLAYLIST",playlistId:o.id});e.success?c.remove():(alert("Failed to delete playlist: "+e.error),g.style.cursor="pointer")}catch(e){alert("Error: "+e.message),g.style.cursor="pointer"}}}),m.appendChild(h),m.appendChild(g),c.appendChild(y),c.appendChild(m),c.onclick=()=>e(this,void 0,void 0,function*(){l.textContent=p,r.style.display="none";const c=document.createElement("div");d.appendChild(c);const u=document.createElement("select");if(Object.assign(u.style,{padding:"6px 12px",backgroundColor:"#2d2d2d",color:"white",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"4px",fontSize:"14px",outline:"none",cursor:"pointer"}),[{value:"publish_desc",label:"Publish Date Desc"},{value:"publish_asc",label:"Publish Date Asc"},{value:"added_desc",label:"Order Added Desc"},{value:"added_asc",label:"Order Added Asc"}].forEach(e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.label,u.appendChild(t)}),a.prepend(u),c.appendChild(function(){if(!document.getElementById("fp-skeleton-style")){const e=document.createElement("style");e.id="fp-skeleton-style",e.textContent="\n            @keyframes fp-shimmer {\n                0% { background-position: -200% 0; }\n                100% { background-position: 200% 0; }\n            }\n            .fp-skeleton {\n                background: linear-gradient(90deg, #2d2d2d 25%, #3d3d3d 50%, #2d2d2d 75%);\n                background-size: 200% 100%;\n                animation: fp-shimmer 1.5s infinite;\n                border-radius: 4px;\n            }\n        ",document.head.appendChild(e)}const e=document.createElement("div");e.style.display="grid",e.style.gridTemplateColumns="repeat(auto-fill, minmax(280px, 1fr))",e.style.gap="24px",e.style.marginTop="20px";for(let t=0;t<12;t++){const t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.backgroundColor="#222",t.style.borderRadius="8px",t.style.overflow="hidden";const n=document.createElement("div");n.className="fp-skeleton",Object.assign(n.style,{aspectRatio:"16/9",width:"100%"});const o=document.createElement("div");o.style.padding="12px",o.style.display="flex",o.style.gap="10px";const i=document.createElement("div");i.className="fp-skeleton",Object.assign(i.style,{width:"36px",height:"36px",borderRadius:"50%",flexShrink:"0"});const l=document.createElement("div");l.style.flex="1",l.style.display="flex",l.style.flexDirection="column",l.style.gap="6px";const s=document.createElement("div");s.className="fp-skeleton",s.style.height="16px",s.style.width="80%";const a=document.createElement("div");a.className="fp-skeleton",a.style.height="12px",a.style.width="50%",l.appendChild(s),l.appendChild(a),o.appendChild(i),o.appendChild(l),t.appendChild(n),t.appendChild(o),e.appendChild(t)}return e}()),s.textContent="Back to Playlists",s.onclick=()=>{u.remove(),c.remove(),r.style.display="block",l.textContent="Your Playlists",s.textContent="Close",s.onclick=()=>t.remove()},!o.video_ids||0===o.video_ids.length)return void(c.innerHTML='<div style="padding: 40px; text-align: center; color: #aaa;">No videos in this playlist.</div>');const y=yield i({type:"GET_PLAYLIST_VIDEOS",videoIds:o.video_ids});if(y.success){c.innerHTML="";let t=y.posts.map((e,t)=>Object.assign(Object.assign({},e),{_originalIndex:t}));const l=()=>{c.innerHTML="";const l=document.createElement("div");l.style.display="grid",l.style.gridTemplateColumns="repeat(auto-fill, minmax(280px, 1fr))",l.style.gap="24px",l.style.marginTop="20px",t.forEach(s=>{var a,d,r;const c=document.createElement("a");c.href=`/post/${s.id}`,c.style.textDecoration="none",c.style.color="inherit",c.style.display="flex",c.style.flexDirection="column",c.style.backgroundColor="#222",c.style.borderRadius="8px",c.style.overflow="hidden",c.style.transform="translateY(0)",c.style.transition="transform 0.2s",c.onmouseover=()=>c.style.transform="translateY(-4px)",c.onmouseout=()=>c.style.transform="translateY(0)";const p=n(s.thumbnail),u=n(null===(a=s.creator)||void 0===a?void 0:a.icon),y=(null===(d=s.metadata)||void 0===d?void 0:d.videoDuration)?new Date(1e3*s.metadata.videoDuration).toISOString().substr(11,8).replace(/^00:/,""):"",m=document.createElement("div");if(Object.assign(m.style,{position:"relative",aspectRatio:"16/9",backgroundColor:"#000"}),p){const e=document.createElement("img");e.src=p,Object.assign(e.style,{width:"100%",height:"100%",objectFit:"cover"}),m.appendChild(e)}if(y){const e=document.createElement("div");e.textContent=y,Object.assign(e.style,{position:"absolute",bottom:"8px",right:"8px",background:"rgba(0,0,0,0.8)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"}),m.appendChild(e)}const h=document.createElement("div");Object.assign(h.style,{position:"absolute",top:"6px",right:"6px",width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"rgba(0,0,0,0.6)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background-color 0.2s",zIndex:"10",opacity:"0"}),h.innerHTML='<svg viewBox="0 0 24 24" style="width: 18px; height: 18px; fill: white;"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',h.onmouseover=()=>{h.style.backgroundColor="#ff0000"},h.onmouseout=()=>{h.style.backgroundColor="rgba(0,0,0,0.6)"},c.addEventListener("mouseenter",()=>{h.style.opacity="1"}),c.addEventListener("mouseleave",()=>{h.style.opacity="0"}),h.onclick=n=>e(this,void 0,void 0,function*(){if(n.preventDefault(),n.stopPropagation(),confirm("Remove this video from the playlist?")){h.style.backgroundColor="#ff0000",h.style.cursor="wait";try{const e=yield i({type:"REMOVE_FROM_PLAYLIST",playlistId:o.id,videoId:s.id});e.success?(c.remove(),t=t.filter(e=>e.id!==s.id)):(alert("Failed to remove video: "+e.error),h.style.backgroundColor="rgba(0,0,0,0.6)",h.style.cursor="pointer")}catch(e){alert("Error: "+e.message)}}}),m.appendChild(h),c.appendChild(m);const g=document.createElement("div");g.style.padding="12px",g.innerHTML=`\n                          <div style="display: flex; gap: 10px;">\n                              ${u?`<img src="${u}" style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;">`:""}\n                              <div style="flex: 1; min-width: 0;">\n                                  <div style="font-weight: 600; font-size: 15px; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="${s.title}">${s.title}</div>\n                                  <div style="color: #aaa; font-size: 13px;">${(null===(r=s.creator)||void 0===r?void 0:r.title)||"Unknown"}</div>\n                                  <div style="color: #666; font-size: 12px; margin-top: 4px;">${new Date(s.releaseDate).toLocaleDateString()}</div>\n                              </div>\n                          </div>\n                        `,c.appendChild(g),l.appendChild(c)}),c.appendChild(l)};u.onchange=()=>{const e=u.value;"publish_desc"===e?t.sort((e,t)=>new Date(t.releaseDate).getTime()-new Date(e.releaseDate).getTime()):"publish_asc"===e?t.sort((e,t)=>new Date(e.releaseDate).getTime()-new Date(t.releaseDate).getTime()):"added_asc"===e?t.sort((e,t)=>e._originalIndex-t._originalIndex):"added_desc"===e&&t.sort((e,t)=>t._originalIndex-e._originalIndex),l()},u.onchange(null)}else c.innerHTML=`<div style="color: red; padding: 20px;">Error loading videos: ${y.error}</div>`}),r.appendChild(c)})):r.textContent="Error: "+o.error}catch(e){r.textContent="Error: "+e.message}})}()}),t}();o.insertAdjacentElement("afterend",t)}}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()})();