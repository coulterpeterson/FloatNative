"use strict";(self.webpackChunkfloatnative_chrome_extension=self.webpackChunkfloatnative_chrome_extension||[]).push([[445],{445:(t,e,n)=>{n.d(e,{FloatplaneAPI:()=>c});var o=n(303),s=function(t,e,n,o){return new(n||(n=Promise))(function(s,c){function i(t){try{l(o.next(t))}catch(t){c(t)}}function a(t){try{l(o.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,a)}l((o=o.apply(t,e||[])).next())})};class c{constructor(){this.baseUrl="https://www.floatplane.com"}static getInstance(){return this.instance||(this.instance=new c),this.instance}getPostDetails(t){return s(this,void 0,void 0,function*(){console.log(`FloatplaneAPI: getPostDetails checking ${t.length} videos`,t);const e=[];for(let n=0;n<t.length;n+=5){const o=t.slice(n,n+5);console.log(`FloatplaneAPI: Fetching chunk ${n/5+1}/${Math.ceil(t.length/5)}`,o);const s=o.map(t=>this.fetchPost(t).catch(e=>(console.error(`FloatplaneAPI: Failed to fetch post ${t}`,e),null)));(yield Promise.all(s)).forEach(t=>{t&&e.push(t)})}return console.log(`FloatplaneAPI: getPostDetails completed. Got ${e.length} posts.`),e})}fetchPost(t){return s(this,void 0,void 0,function*(){const e=yield o.u.getInstance().getAccessToken();if(!e)throw new Error("Not authenticated");const n=yield fetch(`${this.baseUrl}/api/v3/content/post?id=${t}`,{headers:{Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Error fetching post ${t}: ${n.status} ${n.statusText}`);const s=yield n.json();return s.post?s.post:s})}}}}]);